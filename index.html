<html>
    <head>
        <title>web led switch</title>
    </head>
    <body>
    <img src = "http://adaniya.red:50/?action=stream">
        <div>
            <form id="myForm">
                <input type="text" id="msg"><input type="submit" value="Send!">
            </form>
            <button id="leftdeg">left</button>
            <button id="rightdeg">right</button>
            <p>
                <button id="switchButton">turn on</button>
            </p>
        </div>    
        <div>
            <ul id="messages">
            </ul>
        </div>
        <script src="socket.io/socket.io.js"></script>
        <script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
 
        <script>
            $(function(){
                var socket = io.connect('http://adaniya.red:40');
 
                $('#myForm').submit(function(e){
                    e.preventDefault();          //即時処理されないように
                    socket.emit('emit_from_client', $('#msg').val());
                    $('#msg').val('').focus();          //テキストボックスの文字を残さない
                });

                socket.on('connect', function() {
                    $('#messages').append('<li>Connected to the server.</li>');            
                });
 
                socket.on('message', function(message) {    
                    $('#messages').append('<li>' + message + '</li>');
                });
 
                socket.on('disconnect', function() {
                    $('#messages').append('<li>Disconnected from the server.</li>');            
                });
 
                $('#switchButton').bind('click', function() {
                    var message = $('#switchButton').text();
                    socket.send(message);
                    $('#messages').append('<li>me: ' + message + '</li>');
 
                    if (message == 'turn on')
                        $('#switchButton').text('turn off');
                    else 
                        $('#switchButton').text('turn on');
                });

                $('#leftdeg').bind('click', function() {
                    var message = $('#leftdeg').text();
                    socket.send(message);
                }); 

                $('#rightdeg').bind('click', function() {
                    var message = $('#rightdeg').text();
                    socket.send(message);

                });     
            });
        </script>
    </body>
</html>
